<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8"/>
<body>
<div id='foo'></div>
<script>
  var foo = document.getElementById('foo');

  var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      console.log('mutation.type = ' + mutation.type);
      for (var i = 0; i < mutation.addedNodes.length; i++) {
        console.log('  "' + mutation.addedNodes[i].textContent + '" added');
      }

      for (var i = 0; i < mutation.removedNodes.length; i++) {
        console.log('  "' +mutation.removedNodes[i].textContent + '" removed');
      }
    });
  });
  observer.observe(foo, { childList: true });

  var bar = document.createElement('div');
  bar.textContent = 'bar';
  console.log('before append');
  foo.appendChild(bar);
  foo.removeChild(bar);
  console.log('after remove');
</script>
</body>
</html>
